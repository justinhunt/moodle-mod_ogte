{"version":3,"file":"popoverhelper.min.js","sources":["../src/popoverhelper.js"],"sourcesContent":["define(['jquery', 'core/log','core/templates', 'mod_ogte/dependencyloader', 'theme_boost/popover'], function ($, log,templates,dloader,popover,) {\n    \"use strict\"; // jshint ;_;\n\n    /*\n    This file is to manage the transcript popover\n     */\n\n    log.debug('OGTE Popover helper: initialising');\n\n    return {\n\n        lastitem: false,\n        dispose: false, //Bv4 = dispose  Bv3 = destroy\n        popuptitle: M.util.get_string('popoveractions','mod_ogte'),\n\n        init: function () {\n            this.register_events();\n\n        },\n\n        register_events: function () {\n           return;\n        },\n\n        //different bootstrap/popover versions have a different word for \"dispose\" so this method bridges that.\n        //we can not be sure what version is installed\n        disposeWord: function () {\n            if (this.dispose) {\n                return this.dispose;\n            }\n            var version = '3';\n            if ($.fn.popover.Constructor.hasOwnProperty('VERSION')) {\n                version = $.fn.popover.Constructor.VERSION.charAt(0);\n            }\n            switch (version) {\n                case '4':\n                    this.dispose = 'dispose';\n                    break;\n                case '3':\n                default:\n                    this.dispose = 'destroy';\n                    break;\n            }\n            return this.dispose;\n        },\n\n        remove: function (item) {\n            if (item) {\n                $(item).popover(this.disposeWord());\n            } else if (this.lastitem) {\n                $(this.lastitem).popover(this.disposeWord());\n                this.lastitem = false;\n            }\n        },\n\n        isShowing: function(item){\n            if(this.lastitem === item) {\n                return true;\n            }else{\n                return false;\n            }\n        },\n\n        doPopup: function (item,itemword) {\n            var that = this;\n            //if we are already showing this item then dispose of it, set last item to null and go home\n            if (this.lastitem === item) {\n                $(this.lastitem).popover(this.disposeWord());\n                this.lastitem = false;\n                return;\n            }\n\n            //dispose of previous popover, and remember this one\n            if (this.lastitem) {\n                $(this.lastitem).popover(this.disposeWord());\n                this.lastitem = false;\n            }\n            this.lastitem = item;\n\n            //let's add the popover\n            var tdata={};\n            tdata.theword=itemword;\n            tdata.ignoring=false;\n            templates.render('mod_ogte/popoveractionform', tdata).done(function(html, js) {\n                $(item).popover({\n                    title: that.popuptitle,\n                    content: function(){return html;},\n                    trigger: 'manual',\n                    placement: 'top',\n                    html: true,\n                    sanitize: false\n                });\n                $(item).popover('show');\n            });\n        }\n\n    };//end of return value\n});"],"names":["define","$","log","templates","dloader","popover","debug","lastitem","dispose","popuptitle","M","util","get_string","init","register_events","disposeWord","this","version","fn","Constructor","hasOwnProperty","VERSION","charAt","remove","item","isShowing","doPopup","itemword","that","tdata","theword","ignoring","render","done","html","js","title","content","trigger","placement","sanitize"],"mappings":"AAAAA,gCAAO,CAAC,SAAU,WAAW,iBAAkB,4BAA6B,wBAAwB,SAAUC,EAAGC,IAAIC,UAAUC,QAAQC,gBAOnIH,IAAII,MAAM,qCAEH,CAEHC,UAAU,EACVC,SAAS,EACTC,WAAYC,EAAEC,KAAKC,WAAW,iBAAiB,YAE/CC,KAAM,gBACGC,mBAITA,gBAAiB,aAMjBC,YAAa,cACLC,KAAKR,eACEQ,KAAKR,YAEZS,QAAU,OACVhB,EAAEiB,GAAGb,QAAQc,YAAYC,eAAe,aACxCH,QAAUhB,EAAEiB,GAAGb,QAAQc,YAAYE,QAAQC,OAAO,IAG7C,MADDL,aAEKT,QAAU,oBAIVA,QAAU,iBAGhBQ,KAAKR,SAGhBe,OAAQ,SAAUC,MACVA,KACAvB,EAAEuB,MAAMnB,QAAQW,KAAKD,eACdC,KAAKT,WACZN,EAAEe,KAAKT,UAAUF,QAAQW,KAAKD,oBACzBR,UAAW,IAIxBkB,UAAW,SAASD,aACbR,KAAKT,WAAaiB,MAOzBE,QAAS,SAAUF,KAAKG,cAChBC,KAAOZ,QAEPA,KAAKT,WAAaiB,YAClBvB,EAAEe,KAAKT,UAAUF,QAAQW,KAAKD,yBACzBR,UAAW,GAKhBS,KAAKT,WACLN,EAAEe,KAAKT,UAAUF,QAAQW,KAAKD,oBACzBR,UAAW,QAEfA,SAAWiB,SAGZK,MAAM,GACVA,MAAMC,QAAQH,SACdE,MAAME,UAAS,EACf5B,UAAU6B,OAAO,6BAA8BH,OAAOI,MAAK,SAASC,KAAMC,IACtElC,EAAEuB,MAAMnB,QAAQ,CACZ+B,MAAOR,KAAKnB,WACZ4B,QAAS,kBAAkBH,MAC3BI,QAAS,SACTC,UAAW,MACXL,MAAM,EACNM,UAAU,IAEdvC,EAAEuB,MAAMnB,QAAQ"}