define("mod_ogte/popoverhelper",["jquery","core/log","core/templates","mod_ogte/dependencyloader","theme_boost/popover"],(function($,log,templates,dloader,popover){return log.debug("OGTE Popover helper: initialising"),{lastitem:!1,dispose:!1,popuptitle:M.util.get_string("popoveractions","mod_ogte","Ignore"),currentword:"",showing:!1,init:function(){this.register_events()},register_events:function(){var that=this;$(document).on("change","#mod_ogte_actionignoreswitch",(function(e){var word=$(this).attr("data-theword"),ignore=$(this).is(":checked");that.onIgnore(word,ignore)})),$(document).on("click",(function(e){that.lastitem&&!$(e.target).closest(".popover").length&&!$(e.target).closest(that.lastitem).length&&that.showing&&($(that.lastitem).popover(that.disposeWord()),that.showing=!1)}))},disposeWord:function(){if(this.dispose)return this.dispose;var version="3";if($.fn.popover.Constructor.hasOwnProperty("VERSION")&&(version=$.fn.popover.Constructor.VERSION.charAt(0)),"4"===version)this.dispose="dispose";else this.dispose="destroy";return this.dispose},remove:function(item){item?$(item).popover(this.disposeWord()):this.lastitem&&($(this.lastitem).popover(this.disposeWord()),this.lastitem=!1)},isShowing:function(item){return this.lastitem===item},doPopup:function(item,itemword,ignoring){var that=this;if(this.lastitem===item)return $(this.lastitem).popover(this.disposeWord()),that.showing=!1,void(this.lastitem=!1);this.lastitem&&($(this.lastitem).popover(this.disposeWord()),that.showing=!1,this.lastitem=!1),this.lastitem=item;var tdata={};tdata.theword=itemword,tdata.ignoring=!1,tdata.ignoring=ignoring,log.debug("OGTE Popover helper: doPopup"+itemword+" ignoring="+ignoring),templates.render("mod_ogte/popoveractionform",tdata).done((function(html,js){$(item).popover({title:that.popuptitle,content:function(){return html},trigger:"manual",placement:"top",html:!0,sanitize:!1}),$(item).popover("show"),that.showing=!0}))},onIgnore:function(word,ignore){console.log("onIgnore")}}}));

//# sourceMappingURL=popoverhelper.min.js.map